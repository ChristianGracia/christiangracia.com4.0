<app-page-header
  *ngIf="!loadingSongs"
  title="Recently Played"
  subHeader="Click a row to preview song"
></app-page-header>
<div *ngIf="loadingSongs" class="song-loader">
  <mat-spinner class="spinner" diameter="22" color="accent"></mat-spinner>
</div>
<div class="songs-container">
  <div
    *ngIf="!loadingSongs && songs.length > 0"
    class="table-container mat-elevation-z8"
  >
    <table mat-table [dataSource]="dataSource">
      <ng-container matColumnDef="images" class="data-item">
        <th mat-header-cell width="10%" *matHeaderCellDef>Images</th>
        <td mat-cell *matCellDef="let element">
          <img
            height="36px"
            width="36px"
            [src]="element.images[0]"
            alt="{{ element.artist }} album image"
          />
        </td>
      </ng-container>
      <ng-container matColumnDef="name" class="data-item">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let element" class="accent-color">
          {{ element.name }}
        </td>
      </ng-container>
      <ng-container matColumnDef="artist" class="data-item">
        <th mat-header-cell *matHeaderCellDef>Artist</th>
        <td mat-cell *matCellDef="let element">{{ element.artist }}</td>
      </ng-container>
      <ng-container matColumnDef="playedAt" class="data-item">
        <th mat-header-cell *matHeaderCellDef>Time</th>
        <td mat-cell *matCellDef="let element">
          {{ formatDate(element.playedAt) }}
        </td>
      </ng-container>
      <ng-container matColumnDef="previewUrl" class="data-item">
        <th mat-header-cell *matHeaderCellDef width="10%">Preview</th>
        <td mat-cell *matCellDef="let element">
          <mat-icon
            class="play-button"
            color="accent"
            *ngIf="element.previewUrl"
            svgIcon="assets:{{
              !element.isPlaying ? 'play_circle' : 'pause_circle'
            }}"
          >
          </mat-icon>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr
        (click)="playPreviewOfSong(row)"
        class="clickable"
        mat-row
        *matRowDef="let row; columns: displayedColumns"
      ></tr>
    </table>
    <mat-paginator aria-label="Select page" [pageSize]="10"></mat-paginator>
  </div>
</div>
